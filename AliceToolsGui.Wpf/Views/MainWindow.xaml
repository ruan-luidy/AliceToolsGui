<hc:Window
  x:Class="AliceToolsGui.Wpf.Views.MainWindow"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:hc="https://handyorg.github.io/handycontrol"
  xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:vm="clr-namespace:AliceToolsGui.Wpf.ViewModels"
  Title="Alice Tools GUI"
  Width="1000"
  Height="700"
  d:DataContext="{d:DesignInstance Type=vm:MainViewModel,
                                   IsDesignTimeCreatable=False}"
  WindowStartupLocation="CenterScreen"
  mc:Ignorable="d">

  <Grid Margin="20">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <!--  Header  -->
    <Border
      Grid.Row="0"
      Margin="0,0,0,15"
      Padding="20,15"
      Background="{DynamicResource RegionBrush}"
      CornerRadius="8">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto" />
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <iconPacks:PackIconPhosphorIcons
          Width="32"
          Height="32"
          Margin="0,0,15,0"
          VerticalAlignment="Center"
          Kind="Gear" />

        <StackPanel Grid.Column="1" VerticalAlignment="Center">
          <TextBlock
            FontSize="20"
            FontWeight="Bold"
            Text="Alice Tools GUI" />
          <TextBlock
            Margin="0,2,0,0"
            FontSize="12"
            Opacity="0.7"
            Text="{Binding StatusMessage}" />
        </StackPanel>

        <Button
          Grid.Column="2"
          Command="{Binding CheckUpdatesCommand}"
          Content="Verificar Atualizações"
          Style="{StaticResource ButtonPrimary}" />
      </Grid>
    </Border>

    <!--  Main Content Tabs  -->
    <hc:TabControl
      Grid.Row="1"
      hc:BorderElement.CornerRadius="8"
      Background="{DynamicResource RegionBrush}"
      BorderBrush="{DynamicResource BorderBrush}"
      BorderThickness="1"
      SelectedIndex="{Binding SelectedTabIndex}"
      SnapsToDevicePixels="True">

      <!--  AIN File Tab  -->
      <hc:TabItem Header="AIN File">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
          <ContentControl Content="{Binding AinOperationsViewModel}" />
        </ScrollViewer>
      </hc:TabItem>

      <!--  AR Archive Tab  -->
      <hc:TabItem Header="AR Archive">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
          <ContentControl Content="{Binding ArOperationsViewModel}" />
        </ScrollViewer>
      </hc:TabItem>

      <!--  EX File Tab  -->
      <hc:TabItem Header="EX File">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
          <ContentControl Content="{Binding ExOperationsViewModel}" />
        </ScrollViewer>
      </hc:TabItem>

      <!--  ACX File Tab  -->
      <hc:TabItem Header="ACX File">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
          <ContentControl Content="{Binding AcxOperationsViewModel}" />
        </ScrollViewer>
      </hc:TabItem>

      <!--  Configurações Tab  -->
      <hc:TabItem Header="Configurações">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
          <StackPanel Margin="20">
            <TextBlock
              Margin="0,0,0,20"
              FontSize="18"
              FontWeight="Bold"
              Text="Configurações" />

            <!--  Alice Tools Path  -->
            <hc:UniformSpacingPanel Margin="0,0,0,15" Spacing="10">
              <TextBlock
                Width="150"
                VerticalAlignment="Center"
                Text="Caminho Alice Tools:" />
              <TextBox
                Width="400"
                HorizontalAlignment="Left"
                hc:InfoElement.Placeholder="Selecione o caminho..."
                Text="{Binding AliceToolsPath, UpdateSourceTrigger=PropertyChanged}" />
              <Button Command="{Binding BrowseAliceToolsPathCommand}" Content="Procurar" />
            </hc:UniformSpacingPanel>

            <!--  Encoding Selection  -->
            <hc:UniformSpacingPanel Margin="0,0,0,15" Spacing="10">
              <TextBlock
                Width="150"
                VerticalAlignment="Center"
                Text="Encoding Padrão:" />
              <ComboBox
                Width="200"
                HorizontalAlignment="Left"
                ItemsSource="{Binding AvailableEncodings}"
                SelectedItem="{Binding SelectedEncoding}" />
            </hc:UniformSpacingPanel>
          </StackPanel>
        </ScrollViewer>
      </hc:TabItem>
    </hc:TabControl>

    <!--  Footer / Status Bar  -->
    <Border
      Grid.Row="2"
      Margin="0,15,0,0"
      Padding="15,10"
      Background="{DynamicResource RegionBrush}"
      CornerRadius="8">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <TextBlock VerticalAlignment="Center" Text="{Binding FooterMessage}" />

        <ProgressBar
          Grid.Column="1"
          Width="150"
          Height="20"
          IsIndeterminate="{Binding IsBusy}"
          Visibility="{Binding IsBusy, Converter={StaticResource Boolean2VisibilityConverter}}" />
      </Grid>
    </Border>
  </Grid>
</hc:Window>
